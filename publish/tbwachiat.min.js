var TCD=TCD||{};var $s=$s||TCD;TCD.browser={Opera:window.opera?true:false,IE:document.all&&!this.Opera?true:false,IE6:this.IE&&typeof(window.XMLHttpRequest)=="undefined"?true:false,IE8:this.IE&&typeof(document.querySelectorAll)!="undefined"?true:false,IE7:this.IE&&!this.IE6&&!this.IE8?true:false,WebKit:/WebKit/i.test(navigator.userAgent)?true:false,iPhone:/iPhone|iPod/i.test(navigator.userAgent)?true:false,Chrome:/Chrome/i.test(navigator.userAgent)?true:false,Safari:/Safari/i.test(navigator.userAgent)&&!this.Chrome?true:false,Konqueror:navigator.vendor=="KDE"?true:false,Konqueror4:this.Konqueror&&/native code/.test(document.getElementsByClassName)?true:false,Gecko:!this.WebKit&&navigator.product=="Gecko"?true:false,Gecko19:this.Gecko&&Array.reduce?true:false};TCD.isArray=function(a){return typeof a==="object"&&a.length};TCD.isFunction=function(a){return typeof a==="function"};TCD.isWindow=function(a){return a&&typeof a==="object"&&"setInterval" in a};TCD.isPlainObject=function(b){if(!b||typeof b!=="object"||b.nodeType||TCD.isWindow(b)){return false}if(b.constructor&&!hasOwn.call(b,"constructor")&&!hasOwn.call(b.constructor.prototype,"isPrototypeOf")){return false}var a;for(a in b){}return a===undefined||hasOwn.call(b,a)};TCD.isSynthesizedProperty=function(f,c){var b=c.synthesizedProperties,e=false;if(b){var d,a;for(d=0,a=b.length;d<a;d+=1){if(b[d]==f){e=true;break}}}return e};TCD.objectHasMethod=function(a,b){return a!==null&&a[b]!==undefined&&TCD.isFunction(a[b])};TCD.slice=function(e,d,c){var a=[],b;for(b=d;b<=c;b+=1){a.push(e[b])}return a};TCD.extend=function(){var m,c,a,b,h,k,g=arguments[0]||{},f=1,d=arguments.length,l=false,j,e;if(typeof g==="boolean"){l=g;g=arguments[1]||{};f=2}if(typeof g!=="object"&&!TCD.isFunction(g)){g={}}if(d===f){g=this;--f}for(;f<d;f++){if((m=arguments[f])!=null){for(c in m){a=g[c];b=m[c];if(g===b){continue}if(l&&b&&(TCD.isPlainObject(b)||(h=TCD.isArray(b)))){if(h){h=false;k=a&&TCD.isArray(a)?a:[]}else{k=a&&TCD.isPlainObject(a)?a:{}}g[c]=TCD.extend(l,k,b)}else{if(b!==undefined){g[c]=b}}}}}return g};TCD.addListener=function(d,c,b,a){a=a||d;if(TCD.browser.IE){d.attachEvent("on"+c,a[b].context(a))}else{d.addEventListener(c,a[b].context(a),false)}};TCD.extendDOM=function(a){var b=$(a);TCD.extendChildren(b)};TCD.extendChildren=function(e){var n=e.filter("[tcd-base]");var b=e.children();var h,l;for(h=0,l=b.length;h<l;h+=1){TCD.extendChildren($(b[h]))}if(n.length){var a=n[0];var m=a.getAttribute("tcd-base");var f=m.split(".");var d,g,c;g=window;for(d=0,c=f.length;d<c;d+=1){g=g[f[d]]}if(!g){throw new TCD.Error("base class not found")}var k=new g();TCD.extend(a,k);a.init()}};if(!Array.indexOf){Array.prototype.indexOf=function(c){for(var b=0,a=this.length;b<a;b+=1){if(this[b]==c){return b}}return -1}}if(typeof Object.create!=="function"){Object.create=function(b){function a(){}a.prototype=b;return new a()}}Function.prototype.context=function(a){var b=this;temp=function(){return b.apply(a,arguments)};return temp};window.log=function(){log.history=log.history||[];log.history.push(arguments);arguments.callee=arguments.callee.caller;if(this.console){console.log(Array.prototype.slice.call(arguments))}};(function(e){function h(){}for(var g="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),f;f=g.pop();){e[f]=e[f]||h}})(window.console=window.console||{});TCD.Class=function(o){var b={},d=0,l,h,n,e,k,a,f;f=o.prototype;for(a in f){if(TCD.isFunction(f[a])){f[a]._class=o;f[a]._name=a}}if("superclass" in o){h=o.superclass;if(!h.isInitialized){TCD.Class(h)}b=TCD.extend(b,h.prototype)}b=TCD.extend(b,o.prototype);var j=function(i,p){return i+p.charAt(0).toUpperCase()+p.slice(1)};o.synthesizedProperties=o.synthesizedProperties||[];var m=function(i){return function(){return this["_"+i]}};var c=function(i){return function(p){this["_"+i]=p;return this}};var g=function(p,i){return function(){if(arguments.length>0){return this[i].apply(this,arguments)}else{return this[p]()}}};for(d=0,l=o.synthesizedProperties.length;d<l;d+=1){k=o.synthesizedProperties[d];if(k in b){throw ("property: "+k+" has already been synthesized in "+o);continue}n=j("get",k);e=j("set",k);if(!(n in b)){b[n]=m(k)}if(!(e in b)){b[e]=c(k)}b[k]=g(n,e)}o.prototype=b;o.isInitialized=true};TCD.Object=function(){this.qualifiedClassName("TCD.Object")};TCD.Object.synthesizedProperties=["qualifiedClassName"];TCD.Object.prototype={init:function(){},callSuper:function(){var b=TCD.Object.prototype.callSuper.caller;if(TCD.objectHasMethod(b,"superclass")){b.superclass.apply(this,arguments)}else{var c=b._class.superclass.prototype;var a=b._name;if(TCD.objectHasMethod(c,a)){return c[a].apply(this,arguments)}}}};TCD.Class(TCD.Object);TCD.Error=function(a){this.callSuper();this.message(a);this.name("Error");this.qualifiedClassName("TCD.Error")};TCD.Error.superclass=TCD.Object;TCD.Error.synthesizedProperties=["message","name"];TCD.Error.prototype={toString:function(){return this.name()+": ["+this.qualifiedClassName()+'] "'+this.message()+'"'}};TCD.Class(TCD.Error);TCD.events=TCD.events||{};TCD.events.Event=function(c,d,b,a){this.bubbles(b||false);this.cancelable(a||false);this.data(d||{});this.type(c)};TCD.events.Event.COMPLETE="complete";TCD.events.Event.synthesizedProperties=["bubbles","cancelable","data","target","type"];TCD.events.Event.superclass=TCD.Object;TCD.Class(TCD.events.Event);TCD.events=TCD.events||{};TCD.events.EventDispatcher=function(){this.callSuper();this.qualifiedClassName("TCD.events.EventDispatcher");this._eventListeners={}};TCD.events.EventDispatcher.superclass=TCD.Object;TCD.events.EventDispatcher.prototype={addEventListener:function(b,a){if(!this._eventListeners[b]){this._eventListeners[b]=[]}this._eventListeners[b].push(a)},removeEventListener:function(d,c){for(var b=0,a=this._eventListeners[d].length;b<a;b++){if(this._eventListeners[d][b]==c){this._eventListeners[d].splice(b,1)}}},dispatchEvent:function(d){d.target(this);var c=[d];if(this._eventListeners[d.type()]){for(var b=0,a=this._eventListeners[d.type()].length;b<a;b++){this._eventListeners[d.type()][b].apply(this,c)}}}};TCD.Class(TCD.events.EventDispatcher);TCD.display=TCD.display||{};TCD.display.DisplayObject=function(){this.callSuper();this.qualifiedClassName("TCD.display.DisplayObject");this._scaleX=1;this._scaleY=1;this._scale=1;this._placeholderProperties=[]};TCD.display.DisplayObject.superclass=TCD.Object;TCD.display.DisplayObject.synthesizedProperties=["$this","l","t","w","h","scaleX","scaleY","scale","rect",];TCD.display.DisplayObject.prototype={setL:function(a){this.$this().css("left",a)},getL:function(){var a=parseFloat(this.$this().css("left"));return(a)?a:0},setT:function(a){this.$this().css("top",a)},getT:function(){var a=parseFloat(this.$this().css("top"));return(a)?a:0},getW:function(){return(this._w)?this._w:this.$this().width()},setW:function(a){this._w=a;this.$this().width(this.scaleX()*a)},getH:function(){return(this._h)?this._h:this.$this().height()},setH:function(a){this._h=a;this.$this().height(this.scaleY()*a)},getScale:function(){return(this._scaleX==this._scaleY)?this._scaleX:undefined},setScale:function(a){this._scale=a;this.scaleX(a);this.scaleY(a)},setScaleX:function(a){this._scaleX=a;this.w(this.w())},setScaleY:function(a){this._scaleY=a;this.h(this.h())},getRect:function(){return new TCD.geom.Rectangle(this.l(),this.t(),this.w(),this.h())},setRect:function(a){this.l(a.x());this.t(a.y());this.w(a.width());this.h(a.height())},init:function(){this.$this($(this))},animate:function(c,b){for(var d in c){if(TCD.isSynthesizedProperty(d,TCD.display.DisplayObject)){var a=d+"AnimationValue";c[a]=c[d];delete c[d];this[a]=this[d]();this._placeholderProperties.push(a)}}if(b.step){this.providedAnimationStep=b.step}b.step=this.animationStep.context(this);if(b.complete){this.providedAnimationComplete=b.complete}b.complete=this.animationComplete.context(this);this.$this().animate(c,b)},animationStep:function(a,b){var c=/AnimationValue/;if(b.prop.search(c)!=-1){this[b.prop.replace(c,"")](a)}if(this.providedAnimationStep){this.providedAnimationStep(a,b)}},animationComplete:function(){if(this.providedAnimationComplete){this.providedAnimationComplete()}delete this.providedAnimationComplete;delete this.providedAnimationStep;while(this._placeholderProperties.length>0){delete this[this._placeholderProperties[0]];this._placeholderProperties.shift()}},toString:function(){return"["+this.qualifiedClassName()+"]"}};TCD.Class(TCD.display.DisplayObject);TCD.tasks=TCD.tasks||{};TCD.tasks.Task=function(){this.callSuper();this.qualifiedClassName("TCD.tasks.Task");this.progress(0)};TCD.tasks.Task.superclass=TCD.events.EventDispatcher;TCD.tasks.Task.synthesizedProperties=["progress","progressive","name","debug"];TCD.tasks.Task.prototype={start:function(){this.progress(0)},complete:function(){this.progress(1);this.dispatchEvent(new TCD.events.Event(TCD.events.Event.COMPLETE))},toString:function(){return"["+this.qualifiedClassName()+" name="+this.name()+"]"}};TCD.Class(TCD.tasks.Task);TCD.tasks=TCD.tasks||{};TCD.tasks.TaskManager=function(){this._progressiveTasks=[];this._createdTasks=[];this._tasks=[];this.callSuper();this.qualifiedClassName("TCD.tasks.TaskManager")};TCD.tasks.TaskManager.superclass=TCD.tasks.Task;TCD.tasks.TaskManager.synthesizedProperties=["tasks"];TCD.tasks.TaskManager.prototype={setTasks:function(c){var b,a;for(b=0,a=this._tasks.length;b<a;b+=1){this.removeTask(this.tasks()[b])}this._tasks=[];for(b=0,a=c.length;b<a;b+=1){this.addTask(c[b])}},getProgress:function(){var d=0,c,a;for(c=0,a=this._progressiveTasks.length;c<a;c+=1){var b=this._progressiveTasks[c];d+=b.progress}return d/Math.max(this._progressiveTasks.length,1)},setProgress:function(c){var b,a;for(b=0,a=this._progressiveTasks.length;b<a;b+=1){this._progressiveTasks[b].progress(c)}},setDebug:function(c){this.callSuper(c);var b,a;for(b=0,a=this.tasks().length;b<a;b+=1){this.tasks()[b].debug(c)}},addTask:function(a){if(a){this._tasks.push(a);if(a.progressive()){this._progressiveTasks.push(a)}if(this.debug()){a.debug(this.debug())}this.setProgressive()}return a},addTaskAt:function(a,b){if(a){if(a.progressive()){this._progressiveTasks.push(a);this.progressive(true)}this.tasks().splice(b,0,a);if(this.debug()){a.debug(this.debug())}this.setProgressive()}return a},contains:function(a){return this.tasks().indexOf(a)!=-1},getTaskAt:function(a){return this.tasks()[a]},getTaskByName:function(c){var e,d,a;for(d=0,a=this.tasks().length;d<a;d+=1){var b=this.tasks()[d];if(b.name()==c){e=b;break}}return e},getTaskIndex:function(a){if(!this.contains(a)){throw new TCD.Error("The supplied task must be a child of the caller.")}return this.tasks().indexOf(a)},removeTask:function(a){if(!this.contains(a)){throw new TCD.Error("The supplied task must be a child of the caller.")}var b=this.getTaskIndex(a);if(b!=-1){this.removeTaskAt(b)}this.setProgressive();return a},removeTaskAt:function(c){var b=this.getTaskAt(c);this.tasks().splice(c,1);var a=this._progressiveTasks.indexOf(b);if(a!=-1){this._progressiveTasks.splice(a,1)}this.setProgressive();return b},setTaskIndex:function(a,b){if(!this.contains(a)){throw new TCD.Error("The supplied task must be a child of the caller.")}var c=this.getTaskIndex(a);this.tasks().splice(b,0,this.tasks()[c]);this.tasks().splice(c,1)},swapTasksAt:function(c,b){var a=this.tasks()[c];this.tasks()[c]=this.tasks()[b];this.tasks()[b]=a},setProgressive:function(){this._progressive=(this._progressiveTasks.length>0)},toString:function(){return"["+this.qualifiedClassName()+"]"}};TCD.Class(TCD.tasks.TaskManager);TCD.events=TCD.events||{};TCD.events.ModelEvent=function(c,d,b,a){this.callSuper(c,d,b,a)};TCD.events.ModelEvent.DATA_UPDATE="dataUpdate";TCD.events.ModelEvent.superclass=TCD.events.Event;TCD.Class(TCD.events.ModelEvent);TCD.events=TCD.events||{};TCD.events.StateEvent=function(c,d,b,a){this.callSuper(c,d,b,a)};TCD.events.StateEvent.CHILD_STATE_CHANGE="childStateChange";TCD.events.StateEvent.STATE_CHANGE="stateChange";TCD.events.StateEvent.STATE_ACTIVATED="stateActivated";TCD.events.StateEvent.superclass=TCD.events.Event;TCD.Class(TCD.events.StateEvent);TCD.events=TCD.events||{};TCD.events.StateManagerEvent=function(c,e,b,a,d){this.callSuper(c,e,b,a);this.state(d);this.qualifiedClassName("TCD.events.StateManagerEvent")};TCD.events.StateManagerEvent.LOAD_IN_START="loadInStart";TCD.events.StateManagerEvent.LOAD_IN_COMPLETE="loadInComplete";TCD.events.StateManagerEvent.TRANSITION_IN_START="transitionInStart";TCD.events.StateManagerEvent.TRANSITION_IN_COMPLETE="transitionInComplete";TCD.events.StateManagerEvent.LOAD_OUT_START="loadOutStart";TCD.events.StateManagerEvent.LOAD_OUT_COMPLETE="loadOutComplete";TCD.events.StateManagerEvent.TRANSITION_OUT_START="transitionOutStart";TCD.events.StateManagerEvent.TRANSITION_OUT_COMPLETE="transitionOutComplete";TCD.events.StateManagerEvent.TRANSITION_IN_STATE_COMPLETE="transitionInStateComplete";TCD.events.StateManagerEvent.TRANSITION_OUT_STATE_COMPLETE="transitionOutStateComplete";TCD.events.StateManagerEvent.LOAD_IN_STATE_COMPLETE="loadInStateComplete";TCD.events.StateManagerEvent.LOAD_OUT_STATE_COMPLETE="loadOutStateComplete";TCD.events.StateManagerEvent.DEEPLINK="deeplink";TCD.events.StateManagerEvent.superclass=TCD.events.Event;TCD.events.StateManagerEvent.synthesizedProperties=["state"];TCD.Class(TCD.events.StateManagerEvent);TCD.events=TCD.events||{};TCD.events.TimerEvent=function(c,d,b,a){this.callSuper(c,d,b,a);this.qualifiedClassName("TCD.events.TimerEvent")};TCD.events.TimerEvent.TIMER="timer";TCD.events.TimerEvent.TIMER_COMPLETE="timerComplete";TCD.events.TimerEvent.superclass=TCD.events.Event;TCD.Class(TCD.events.TimerEvent);TCD.geom=TCD.geom||{};TCD.geom.Point=function(a,b){this.callSuper();this.qualifiedClassName("TCD.geom.Point");this.x=a;this.y=b};TCD.geom.Point.superclass=TCD.Object;TCD.geom.Point.prototype={toString:function(){return"["+this.qualifiedClassName()+"]"}};TCD.Class(TCD.geom.Point);TCD.geom=TCD.geom||{};TCD.geom.Rectangle=function(b,d,c,a){this.callSuper();this.qualifiedClassName("TCD.geom.Rectangle");this.x(b);this.y(d);this.width(c);this.height(a)};TCD.geom.Rectangle.superclass=TCD.Object;TCD.geom.Rectangle.synthesizedProperties=["x","y","width","height","top","left","right","bottom","size","bottomRight","topLeft"];TCD.geom.Rectangle.prototype={getTop:function(){return this.y()},getLeft:function(){return this.x()},getRight:function(){return this.x()+this.width()},getBottom:function(){return this.y()+this.height()},getSize:function(){return new TCD.geom.Point(this.width(),this.height())},getTopLeft:function(){return new TCD.geom.Point(this.top(),this.left())},getBottomRight:function(){return new TCD.geom.Point(this.bottom(),this.right())},clone:function(){return new TCD.geom.Rectangle(this.x(),this.y(),this.width(),this.height())},toString:function(){return"["+this.qualifiedClassName()+"]"}};TCD.Class(TCD.geom.Rectangle);TCD.math=TCD.math||{};TCD.math.Percent=function(a,b){this.callSuper();a=b||0;b=b||true;if(b){this.decimalPercentage(a)}else{this.percentage(a)}};TCD.math.Percent.superclass=TCD.Object;TCD.synthesizedProperties=["percentage","decimalPercentage"];TCD.prototype={getPercentage:function(){return 100*this._percent},setPercentage:function(a){this._percent=a*0.01},getDecimalPercentage:function(){return this._percent},setDecimalPercentage:function(a){this._percent=a},equals:function(a){return this.decimalPercentage()==a.decimalPercentage()},clone:function(){return new TCD.math.Percent(this.decimalPercentage())},valueOf:function(){return this.decimalPercentage()},toString:function(){return this.decimalPercentage().toString()}};TCD.Class(TCD.math.Percent);TCD.model=TCD.model||{};TCD.model.Model=function(){this.callSuper();this.qualifiedClassName("TCD.model.Model")};TCD.model.Model.superclass=TCD.events.EventDispatcher;TCD.model.Model.synthesizedProperties=["data"];TCD.model.Model.prototype={setData:function(a){this._data=a;this.dispatchEvent(new TCD.events.ModelEvent(TCD.events.ModelEvent.DATA_UPDATE))},toString:function(){return"["+this.qualifiedClassName()+"]"}};TCD.Class(TCD.model.Model);TCD.state=TCD.state||{};TCD.state.Redirect=function(a,b){this.callSuper();this.qualifiedClassName("TCD.state.Redirect");this.location(a);this.newLocation(b)};TCD.state.Redirect.superclass=TCD.Object;TCD.state.Redirect.synthesizedProperties=["location","newLocation"];TCD.Class(TCD.state.Redirect);TCD.state=TCD.state||{};TCD.state.State=function(a){this.callSuper();this.name(a);this._children=[];this.qualifiedClassName("TCD.state.State")};TCD.state.State.superclass=TCD.events.EventDispatcher;TCD.state.State.synthesizedProperties=["root","children","stateManager","parent","name","title","description","defaultChild","selectedChild","activatedChild","selectedChildIndex","selected","index","stateLocation","selectable","pageViewName","numChildren","transitionIn","transitionOut","loadIn","loadOut","activated","childClass"];TCD.state.State.prototype={setRoot:function(c){this._root=c;for(var b=0,a=this.children().length;b<a;b+=1){this.children()[b].root(this.root())}},setStateManager:function(c){this._stateManager=c;for(var b=0,a=this.children().length;b<a;b+=1){this.children()[b].stateManager(this.stateManager())}},setChildren:function(c){for(var b=0,a=this.children().length;b<a;b+=1){this.removeChild(this.children()[b])}this.children()=[];for(b=0,a=c.length;b<a;b++){this.addChild(c[b])}},setSelectedChild:function(a){if(!this.contains(a)){throw new TCD.Error("The supplied child must be a child of the caller.")}this._selectedChild=a},getActivatedChild:function(){var c,b,a;for(b=0,a=this.children().length;b<a;b+=1){child=this.children()[b];if(child.activated){c=child;break}}return c},getNumChildren:function(){return this.children().length},getSelectedChildIndex:function(){var a;if(this.selectedChild()){a=this.getChildIndex(this.selectedChild())}return a},setSelectedChildIndex:function(a){var b=this.getChildAt(a);this.selectedChild(b)},setSelected:function(a){if(a!=this.selected()){this._selected=a;this.dispatchEvent(new TCD.events.StateEvent(TCD.events.StateEvent.STATE_CHANGE))}},getIndex:function(){return this.parent().getChildIndex(this)},getStateLocation:function(){var d=[],f=this,c="",e,a,b;while(f){d.push(f);f=f.parent()}d.reverse();for(e=0,a=d.length;e<a;e+=1){b=d[e];c+=b.name();if(b!=d[a-1]){c+="/"}}return c},childChangeHandler:function(a){var b=a.target();if(b.selected()){this._selectedChild=b}else{if(b==this._selectedChild){this._selectedChild=undefined}}this.dispatchEvent(new TCD.events.StateEvent(TCD.events.StateEvent.CHILD_STATE_CHANGE))},addChild:function(a){a.parent(this);a.stateManager(this.stateManager());a.root(this.root());this.children().push(a);a.addEventListener(TCD.events.StateEvent.STATE_CHANGE,this.childChangeHandler.context(this))},addChildAt:function(b,a){b.parent(this);b.stateManager(this.stateManager());b.root(this.root());this.children().splice(a,0,b);b.addEventListener(TCD.events.StateEvent.STATE_CHANGE,this.childChangeHandler.context(this));return b},contains:function(a){return this.children().indexOf(a)!=-1},getChildAt:function(a){return this.children()[a]},getChildByName:function(b){var d,c,a,e;for(c=0,a=this.children().length;c<a;c+=1){e=this.children()[c];if(e.name()==b){d=e;break}}return d},getChildIndex:function(a){if(!this.contains(a)){throw new TCD.Error("The supplied child must be a child of the caller.")}return this.children().indexOf(a)},removeChild:function(b){if(!this.contains(b)){throw new TCD.Error("The supplied child must be a child of the caller.")}var a=this.getChildIndex(b),b;if(a!=-1){b=this.removeChildAt(a)}return b},removeChildAt:function(a){var b=this.getChildAt(a);b.removeEventListener(TCD.events.StateEvent.STATE_CHANGE,this.childChangeHandler.context(this));this.children().splice(a,1);return b},setChildIndex:function(c,a){if(!this.contains(c)){throw new TCD.Error("The supplied child must be a child of the caller.")}var b=this.getChildIndex(c);this.children().splice(a,0,this.children()[b]);this.children().splice(b,1)},swapChildrenAt:function(c,b){var a=this.children()[c];this.children()[c]=this.children()[b];this.children()[b]=a},setSelectedChildByName:function(b){var d,c,a,e;for(c=0,a=this.children().length;c<a;c+=1){e=this.children()[c];if(e.name()==b){d=e;break}}if(d){this.selectedChild(d)}else{throw new TCD.Error("The supplied child must be a child of the caller.")}},browse:function(){this.stateManager().location(this.stateLocation())},browsePreviousSibling:function(){var a=this.index-1;if(a<0){a=this.parent().children().length-1}this.parent().getChildAt(a).browse()},browseNextSibling:function(){var a=index+1;if(a>this.parent().children().length-1){a=0}this.parent().getChildAt(a).browse()},browsePreviousChild:function(){var a=this.selectedChildIndex()-1;if(a<0){a=this.children().length-1}this.getChildAt(a).browse()},browseNextChild:function(){var a=this.selectedChildIndex()+1;if(a>this.children().length-1){a=0}this.getChildAt(a).browse()},getChildFromPath:function(e){var c=this,b,a;if(e.length>0){var d=e.split("/");for(b=0,a=d.length;b<a;b+=1){c=c.getChildByName(d[b])}}return c},createChildByName:function(b){if(!this.childClass()){throw new TCD.Error(this+": no child class defined")}var a=new this.childClass();a.name(b);this.addChild(a);return a},toString:function(){return"[State name="+this.name()+" title="+this.title()+" className="+this.qualifiedClassName()+" defaultChild="+this.defaultChild()+"]"}};TCD.Class(TCD.state.State);TCD.state=TCD.state||{};TCD.state.StateManager=function(b,a){this.callSuper();this.root(a);this.qualifiedClassName("TCD.state.StateManager");this.name(b||this.qualifiedClassName()+Math.round(Math.random()*100000));this.pageViewType(TCD.state.StateManager.PAGE_VIEW_LOCATION);this._progressTimer=new TCD.utils.Timer(33);this._progressTimer.addEventListener(TCD.events.TimerEvent.TIMER,this.taskManagerProgressHandler.context(this));this._transitionInPath;this._transitionWasInterrupted;this._isInTransition;this._transitions;this._currentTransition;this._redirects=[]};TCD.state.StateManager.PAGE_VIEW_LOCATION="pageViewLocation";TCD.state.StateManager.PAGE_VIEW_NAME="pageViewName";TCD.state.StateManager.superclass=TCD.events.EventDispatcher;TCD.state.StateManager.synthesizedProperties=["root","deepLinking","tree","startLocation","location","activeStates","taskManager","preloader","selectedStates","debug","trackViewPages","pageViewType","redirects","name"];TCD.state.StateManager.prototype={setDeepLinking:function(a){this._deepLinking=a;if(this.deepLinking()){this.deepLinking().change(this.deepLinkingChangeHandler.context(this))}},setTree:function(a){this._tree=a;a.stateManager(this);a.root(this.root())},getLocation:function(){var c=this.selectedStates(),e="",d,a;for(d=0,a=c.length;d<a;d+=1){var b=c[d];e+=b.name();if(b!=c[c.length-1]){e+="/"}}return e},setLocation:function(c){if(this.deepLinking()){var e=c.split("/");e.shift();var d="/"+e.join("/");this.deepLinking().value(d)}else{var a=c.split("/");a.shift();var b=this.tree();if(a.length>0){b=b.getChildFromPath(a.join("/"))}this._transitionInPath=b.stateLocation();this.checkIfInTransition()}},getSelectedStates:function(){var a=[],b;if(this.tree().selected()){b=this.tree()}while(b){a.push(b);b=b.selectedChild()}return a},deepLinkingChangeHandler:function(a){var b=this.deepLinking().value();if(b==""||b=="/"){this._transitionInPath=this.tree().stateLocation()}else{this._transitionInPath=this.tree().name()+b}this.checkIfInTransition()},taskManagerProgressHandler:function(b){var a=this.taskManager().progress();if(this.debug()){log(this.name()+" totalProgress = "+a)}if(isNaN(a)){a=0}if(this.preloader()){this.preloader().progress(a)}},transitionInCompleteHandler:function(a){if(this.trackPageViews()){var b;switch(this.pageViewType()){case TCD.state.StateManager.PAGE_VIEW_LOCATION:b=this.location();break;case TCD.state.StateManager.PAGE_VIEW_NAME:b=this.location();break}}},taskManagerCompleteHandler:function(a){this.taskManager().removeEventListener(TCD.events.Event.COMPLETE,this.taskManagerCompleteHandler.context(this));if(this.taskManager().progressive()){this.taskManagerProgressHandler();this._progressTimer.stop()}this.dispatchEvent(new TCD.events.Event(this._currentTransition.transitionName()+"Complete"));this._currentTransition=null;if(this._transitions.length>0){this.startTransition()}else{this._transitions=null;this._isInTransition=false;if(this._transitionWasInterrupted){this.startTransitions()}}},init:function(){if(this.deepLinking()){if(this.deepLinking().value()!="/"){this.deepLinkingChangeHandler()}else{if(this.startLocation()){this.location(this.startLocation())}else{this._transitionInPath=this.tree().stateLocation();this.checkIfInTransition()}}}else{if(this.startLocation()){this.location(this.startLocation())}else{this._transitionInPath=this.tree().stateLocation();this.checkIfInTransition()}}},checkIfInTransition:function(){if(this._isInTransition){this._transitionWasInterrupted=true}else{this.startTransitions()}},startTransitions:function(){this._transitionWasInterrupted=false;this._isInTransition=false;this._transitionInPath=this.checkRedirect(this._transitionInPath);var c=this._transitionInPath.split("/");var k=[];if(this.location().length>0){k=this.location().split("/")}var d=0,e,g,h,l,f,b;for(e=0,g=k.length;e<g;e+=1){h=k.slice(0,e+1);l=h.join("/");f=c.slice(0,e+1);b=f.join("/");if(l==b){d+=1}}this._transitions=[];var a=[];for(e=k.length-1;e>=d;e-=1){h=k.slice(0,e+1);a.push(h.join("/"))}this.deactivateStates(a);this._transitions.push(new TCD.state.TransitionProperties(a.slice(),"loadOut",false));this._transitions.push(new TCD.state.TransitionProperties(a.slice(),"transitionOut",false));var j=[];for(e=d,g=c.length;e<g;e+=1){f=c.slice(0,e+1);j.push(f.join("/"))}j=this.activateStates(j);if(j.length==0){j=this.checkForDefaultStates(this._transitionInPath)}this._transitions.push(new TCD.state.TransitionProperties(j.slice(),"loadIn",false));this._transitions.push(new TCD.state.TransitionProperties(j.slice(),"transitionIn",false));this.startTransition()},deactivateStates:function(c){var g,h;for(g=0,h=c.length;g<h;g+=1){var k=c[g];var d=k.split("/");d.shift();var a=this.tree();if(d.length>0){var f,e;for(f=0,e=d.length;f<e;f+=1){var b=a;a=b.getChildByName(d[f])}}a.activated(false)}},activateStates:function(c){var e=[],h,k;this._activeStates=[];for(h=0,k=c.length;h<k;h+=1){var m=c[h];var d=m.split("/");d.shift();var a=this.tree();if(d.length>0){var g,f;for(g=0,f=d.length;g<f;g+=1){var b=a;a=b.getChildByName(d[g]);if(!a){a=b.createChildByName(d[g])}}}a.activated(true);this.activeStates().push(a);e.push(a.stateLocation());if(a.stateLocation()==c[c.length-1]){var l=a.getChildByName(a.defaultChild());while(l){l.activated(true);this.activeStates().push(l);e.push(l.stateLocation());l=l.getChildByName(l.defaultChild())}}}return e},checkForDefaultStates:function(g){var h=[];var f=g.split("/");f.shift();var e=this.tree();if(f.length>0){var c,a;for(c=0,a=f.length;c<a;c+=1){var d=e;e=d.getChildByName(f[c])}}var b=e.getChildByName(e.defaultChild);while(b){b.activated(true);this.activeStates().push(b);h.push(b.stateLocation());b=b.getChildByName(b.defaultChild())}return h},startTransition:function(){this._currentTransition=this._transitions.shift();this.dispatchEvent(new TCD.events.Event(this._currentTransition.transitionName()+"Start"));this.taskManager(new TCD.tasks.SequentialTask());this.taskManager().name(this._currentTransition.transitionName());if(this.debug()){this.taskManager().debug(this.debug())}this.taskManager().addEventListener(TCD.events.Event.COMPLETE,this.taskManagerCompleteHandler.context(this));var d,a;for(d=0,a=this._currentTransition.locations().length;d<a;d+=1){var g=this._currentTransition.locations()[d];var f=g.split("/");f.shift();var e=this.tree();if(f.length>0){e=e.getChildFromPath(f.join("/"))}var c=e[this._currentTransition.transitionName()]();if(c){this.taskManager().addTask(c)}var b;if(this._currentTransition.transitionName()=="transitionIn"){b=true}if(this._currentTransition.transitionName()=="transitionOut"){b=false}this.taskManager().addTask(new TCD.tasks.PropertyTask(e,"selected",b))}if(this.taskManager().progress()==1){this.taskManager().progressive(false)}if(this.taskManager().progressive()){if(this.preloader()){this.taskManager().addTaskAt(new TCD.tasks.PropertyTask(this.preloader(),"progress",0),0);this.taskManager().addTaskAt(this.preloader().transitionIn(),1);this.taskManager().addTask(this.preloader().transitionOut())}this.taskManager().progress(0);this._progressTimer.start()}this.taskManager().start()},addRedirect:function(a,b){this.removeRedirect(a);this.redirects.push(new TCD.state.Redirect(a,b))},removeRedirect:function(b){var d=[];var c,a;for(c=0,a=this.redirects().length;c<a;c+=1){var e=this.redirects()[c];if(e.location()!=b){d.push(e)}}this.redirects(d)},checkRedirect:function(c){var b,a;for(b=0,a=this.redirects().length;b<a;b+=1){var d=redirects()[b];if(c==d.location()){c=d.newLocation()}}return c},toString:function(){return"[StateManager name="+this.name()+" className = "+this.qualifiedClassName()+"]"}};TCD.Class(TCD.state.StateManager);TCD.state=TCD.state||{};TCD.state.TransitionProperties=function(a,b,c){this.callSuper();this.locations(a);this.transitionName(b);this.showPreloader(c)};TCD.state.TransitionProperties.superclass=TCD.Object;TCD.state.TransitionProperties.synthesizedProperties=["locations","transitionName","showPreloader","currentState"];TCD.state.TransitionProperties.prototype={toString:function(){return this.transitionName()}};TCD.Class(TCD.state.TransitionProperties);TCD.tasks=TCD.tasks||{};TCD.tasks.FunctionTask=function(c,d){this.callSuper();this.qualifiedClassName("TCD.tasks.FunctionTask");this.method(d);this.context(c);this.args([]);var b,a;for(b=2,a=arguments.length;b<a;b+=1){this.args().push(arguments[b])}};TCD.tasks.FunctionTask.superclass=TCD.tasks.Task;TCD.tasks.FunctionTask.synthesizedProperties=["context","method","args"];TCD.tasks.FunctionTask.prototype={start:function(){this.method().apply(this.context(),this.args());this.complete()},toString:function(){return"["+this.qualifiedClassName()+"]"}};TCD.Class(TCD.tasks.FunctionTask);TCD.tasks=TCD.tasks||{};TCD.tasks.JQueryAjaxTask=function(a,b){this.callSuper();this.qualifiedClassName("TCD.tasks.JQueryAjaxTask");this.url(a);this.settings(b)};TCD.tasks.JQueryAjaxTask.superclass=TCD.tasks.Task;TCD.tasks.JQueryAjaxTask.synthesizedProperties=["url","settings","content"];TCD.tasks.JQueryAjaxTask.prototype={ajaxSuccessHandler:function(b,c,a){this.content(b);this.complete()},ajaxErrorHandler:function(a,c,b){if(this.debug()){log(this+" Error: could not load this file. textStatus="+c+" errorThrown="+b)}this.complete()},ajaxComplete:function(a,b){if(this.debug()){log(this+" Complete: textStatus="+b)}},start:function(){$.ajax(this.url(),this.settings()).success(this.ajaxSuccessHandler.context(this)).error(this.ajaxErrorHandler.context(this)).complete(this.ajaxComplete.context(this))},toString:function(){return"["+this.qualifiedClassName()+"]"}};TCD.Class(TCD.tasks.JQueryAjaxTask);TCD.tasks=TCD.tasks||{};TCD.tasks.JQueryEffectTask=function(c,b){this.callSuper();this.qualifiedClassName("TCD.tasks.JQueryEffectTask");var a=TCD.slice(arguments,2,arguments.length-1);if(!TCD.isFunction(c[b])){throw new TCD.Error("target does not support this effect")}this.target(c);this.effect(b);this.args(a)};TCD.tasks.JQueryEffectTask.superclass=TCD.tasks.Task;TCD.tasks.JQueryEffectTask.synthesizedProperties=["target","effect","args"];TCD.tasks.JQueryEffectTask.prototype={effectCompleteHandler:function(){this.complete()},start:function(){this.args().push($.proxy(this.effectCompleteHandler,this));this.target()[this.effect()].apply(this.target(),this.args())},toString:function(){return"["+this.qualifiedClassName()+"]"}};TCD.Class(TCD.tasks.JQueryEffectTask);TCD.tasks=TCD.tasks||{};TCD.tasks.JQueryGetJSONTask=function(a,b){this.callSuper();this.qualifiedClassName("TCD.tasks.JQueryGetJSONTask");this.url(a);this.data(b)};TCD.tasks.JQueryGetJSONTask.superclass=TCD.tasks.Task;TCD.tasks.JQueryGetJSONTask.synthesizedProperties=["url","data","content"];TCD.tasks.JQueryGetJSONTask.prototype={jsonHandler:function(a,b){switch(b){case"success":this.content(a);break}this.complete()},start:function(){$.getJSON(this.url(),this.jsonHandler.context(this))},toString:function(){return"["+this.qualifiedClassName()+"]"}};TCD.Class(TCD.tasks.JQueryGetJSONTask);TCD.tasks=TCD.tasks||{};TCD.tasks.JQueryImageLoaderTask=function(a){this.callSuper();this.qualifiedClassName("TCD.tasks.JQueryImageLoaderTask");this.url(a);this.content(new Image());this.$content($(this.content()));this.$content().load(this.completeHandler.context(this)).error(this.errorHandler.context(this))};TCD.tasks.JQueryImageLoaderTask.superclass=TCD.tasks.Task;TCD.tasks.JQueryImageLoaderTask.synthesizedProperties=["url","content","$content"];TCD.tasks.JQueryImageLoaderTask.prototype={completeHandler:function(){this.complete()},errorHandler:function(){if(this.debug()){log(this+" Error: could not load this file.")}this.complete()},start:function(){this.$content().attr("src",this.url())},toString:function(){return"["+this.qualifiedClassName()+" url="+this.url()+"]"}};TCD.Class(TCD.tasks.JQueryImageLoaderTask);TCD.tasks=TCD.tasks||{};TCD.tasks.JQueryLoadTask=function(b,a){this.callSuper();this.qualifiedClassName("TCD.tasks.JQueryLoadTask");if(!b){throw new TCD.Error("a valid url must be specified")}this.url(b);this.$target(a||$("body"))};TCD.tasks.JQueryLoadTask.superclass=TCD.tasks.Task;TCD.tasks.JQueryLoadTask.synthesizedProperties=["url","$target"];TCD.tasks.JQueryLoadTask.prototype={loadHandler:function(b,a,c){if(a=="error"){log(this+" Error: could not load this file")}this.complete()},start:function(){this.$target().load(this.url(),this.loadHandler.context(this))},toString:function(){return"["+this.qualifiedClassName()+" url="+this.url()+"]"}};TCD.Class(TCD.tasks.JQueryLoadTask);TCD.tasks=TCD.tasks||{};TCD.tasks.ParallelTask=function(){this.callSuper();this.qualifiedClassName("TCD.tasks.ParallelTask");if(arguments.length>0){this.tasks(arguments)}};TCD.tasks.ParallelTask.superclass=TCD.tasks.TaskManager;TCD.tasks.ParallelTask.prototype={taskCompleteHandler:function(b){var a=b.target();if(this.debug()){log("taskComplete "+a)}a.removeEventListener(TCD.events.Event.COMPLETE,this.taskCompleteHandler.context(this));this._createdTasks.push(a);if(this._createdTasks.length==this.tasks().length){if(this.debug()){log("tasksComplete "+this)}this.complete()}},start:function(){this._createdTasks=[];if(this.tasks().length>0){var c,a;for(c=0,a=this.tasks().length;c<a;c+=1){var b=this.tasks()[c];b.addEventListener(TCD.events.Event.COMPLETE,this.taskCompleteHandler.context(this));if(this.debug()){log("taskStart "+b)}b.start()}}else{this.complete()}},toString:function(){return"["+this.qualifiedClassName()+" name="+this.name()+"]"}};TCD.Class(TCD.tasks.ParallelTask);TCD.tasks=TCD.tasks||{};TCD.tasks.PropertyTask=function(c,b,a){this.callSuper();this.qualifiedClassName("TCD.tasks.PropertyTask");this.target(c);this.property(b);this.value(a)};TCD.tasks.PropertyTask.superclass=TCD.tasks.Task;TCD.tasks.PropertyTask.synthesizedProperties=["target","property","value"];TCD.tasks.PropertyTask.prototype={start:function(){this.target()[this.property()](this.value());this.complete()},toString:function(){return"["+this.qualifiedClassName()+" target="+this.target()+" property="+this.property()+" value="+this.value()+"]"}};TCD.Class(TCD.tasks.PropertyTask);TCD.tasks=TCD.tasks||{};TCD.tasks.SequentialTask=function(){this.callSuper();this.qualifiedClassName("TCD.tasks.SequentialTask");if(arguments.length>0){this.tasks(arguments)}};TCD.tasks.SequentialTask.superclass=TCD.tasks.TaskManager;TCD.tasks.SequentialTask.synthesizedProperties=[];TCD.tasks.SequentialTask.prototype={taskCompleteHandler:function(b){var a=b.target();if(this.debug()){log("taskComplete "+a)}a.removeEventListener(TCD.events.Event.COMPLETE,this.taskCompleteHandler.context(this));this._createdTasks.push(a);if(this._createdTasks.length==this.tasks().length){this.complete()}else{this.createTask()}},start:function(){this._createdTasks=[];if(this.tasks().length>0){this.createTask()}else{this.complete()}},createTask:function(){var b=this._createdTasks.length;var a=this.tasks()[b];a.addEventListener(TCD.events.Event.COMPLETE,this.taskCompleteHandler.context(this));if(this.debug()){log("taskStart "+a)}a.start()},toString:function(){return"["+this.qualifiedClassName()+" name="+this.name()+"]"}};TCD.Class(TCD.tasks.SequentialTask);TCD.ui=TCD.ui||{};TCD.ui.UIButton=function(){this.callSuper();this.qualifiedClassName("TCD.ui.UIButton")};TCD.ui.UIButton.superclass=TCD.display.DisplayObject;TCD.ui.UIButton.synthesizedProperties=[];TCD.ui.UIButton.prototype={mouseOverHandler:function(a){this.$this().addClass("tcd-over")},mouseOutHandler:function(a){this.$this().removeClass("tcd-over")},clickHandler:function(a){},mouseUpHandler:function(a){this.$this().removeClass("tcd-down")},mouseDownHandler:function(a){this.$this().addClass("tcd-down")},init:function(){this.callSuper();TCD.addListener(this,"click","clickHandler");TCD.addListener(this,"mouseover","mouseOverHandler");TCD.addListener(this,"mouseout","mouseOutHandler");TCD.addListener(this,"mouseup","mouseUpHandler");TCD.addListener(this,"mousedown","mouseDownHandler")},toString:function(){return"["+this.qualifiedClassName()+"]"}};TCD.Class(TCD.ui.UIButton);TCD.ui=TCD.ui||{};TCD.ui.UICarousel=function(){this.callSuper();this.qualifiedClassName("TCD.ui.UICarousel");this._items=[];this._itemHeight=150;this._neighbors=1;this._itemDistance=160;this._speed=500};TCD.ui.UICarousel.superclass=TCD.display.DisplayObject;TCD.ui.UICarousel.synthesizedProperties=["items","center","itemHeight","neighbors","itemDistance","positionIndex","startX","centerIndex","speed"];TCD.ui.UICarousel.prototype={setPositionIndex:function(h){if(this._positionIndex==h){return}var e=this._positionIndex||0;var j=this.items()[e].carouselIndex()-this.items()[h].carouselIndex();var b,f,l,k,g,c,d,a;for(b=0,f=this.items().length;b<f;b+=1){l=this.items()[b];k=l.carouselIndex()+j;k=(k<0||k>=f)?(k<0)?k+f:k-f:k;l.carouselIndex(k);l.carousel(this);g=l.carouselIndex()*this.itemDistance()+startX;c=Math.abs(this.centerIndex()-k);l.$this().css("z-index",f-c);d=(c<=this.neighbors())?1:0;a=1-c*0.2;l.animate({l:g,t:this.center().y,opacity:d,scale:a},{duration:this._speed*Math.abs(j)})}this._positionIndex=h},init:function(){this.callSuper();this.center(new TCD.geom.Point(Math.round(this.w()*0.5),Math.round(this.h()*0.5)));this.$this().addClass("tcd-carousel");var e=this.getElementsByTagName("div");var g,m,c;for(g=0,m=e.length;g<m;g+=1){c=e[g];c.index(g);c.itemHeight(this.itemHeight());this.items().push(c)}var b=1,n=this.items().length-1,h=this.center().x,d=this.center().y,p=this.items()[0],a=h+this.itemDistance(),f=h-this.itemDistance(),j,o,l=0,k;this.centerIndex(Math.floor(this.items().length*0.5));p.l(h);p.t(d);p.$this().css("opacity",1);p.carouselIndex(this.centerIndex());while(b<=n){l++;k=(l>this.neighbors())?0:1;j=this.items()[b];if(j){j.l(a);j.t(d);j.carouselIndex(this.centerIndex()+l);j.$this().css("opacity",k);a+=this.itemDistance();b++}o=this.items()[n];if(o){o.l(f);o.t(d);o.carouselIndex(this.centerIndex()-l);o.$this().css("opacity",k);f-=this.itemDistance();n--}}startX=o.l();this.positionIndex(0)},previous:function(){var a=this.positionIndex()-1;a=(a<0)?this.items().length-1:a;this.positionIndex(a)},next:function(){var a=this.positionIndex()+1;a=(a>=this.items().length)?0:a;this.positionIndex(a)},toString:function(){return"["+this.qualifiedClassName()+"]"}};TCD.Class(TCD.ui.UICarousel);TCD.ui=TCD.ui||{};TCD.ui.UICarouselItem=function(){this.callSuper();this.qualifiedClassName("TCD.ui.UICarouselItem");this._itemHeight=100};TCD.ui.UICarouselItem.superclass=TCD.display.DisplayObject;TCD.ui.UICarouselItem.synthesizedProperties=["index","carouselIndex","carousel","img","itemHeight","itemWidth"];TCD.ui.UICarouselItem.prototype={setItemHeight:function(a){this._itemHeight=a;if(this.img().complete){this.scaleAndPositionImage()}},setScale:function(a){this._scale=a;this.scaleAndPositionImage()},getScale:function(){return this._scale},imageLoadedHandler:function(){this.scaleAndPositionImage()},init:function(){this.callSuper();this.img(this.getElementsByTagName("img")[0]);if(!this.img().complete){TCD.addListener(this.img(),"load","imageLoadedHandler",this)}else{this.scaleAndPositionImage()}},scaleAndPositionImage:function(){var b=new TCD.geom.Rectangle(0,0,this.img().w(),this.img().h());var a=TCD.utils.RatioUtils.scaleWidth(b,this._itemHeight*this._scale,true);this.img().w(a.width());this.img().h(a.height());this.img().l(Math.round(-this.img().w()*0.5));this.img().t(Math.round(-this.img().h()*0.5))},toString:function(){return"["+this.qualifiedClassName()+"]"}};TCD.Class(TCD.ui.UICarouselItem);TCD.utils=TCD.utils||{};TCD.utils.ArrayUtils=TCD.utils.ArrayUtils||{};TCD.utils.ArrayUtils.getItemByKeys=function(f,b){var d=-1,e,a;while(++d<f.length){e=f[d];a=true;for(var c in b){if(!e.hasOwnProperty(c)||e[c]!=b[c]){a=false}}if(a){return e}}return undefined};TCD.utils.ArrayUtils.getItemsByKeys=function(g,b){var e=[],d=-1,f,a;while(++d<g.length){f=g[d];a=true;for(var c in b){if(!f.hasOwnProperty(c)||f[c]!=b[c]){a=false}}if(a){e.push(f)}}return e};TCD.utils.ArrayUtils.getItemByAnyKey=function(e,a){var c=-1,d;while(++c<e.length){d=e[c];for(var b in a){if(!d.hasOwnProperty(b)||d[b]!=a[b]){return d}}}return undefined};TCD.utils.ArrayUtils.getItemsByAnyKey=function(g,b){var e=[],d=-1,f,a;while(++d<g.length){f=g[d];a=true;for(var c in b){if(!f.hasOwnProperty(c)||f[c]!=b[c]){e.push(f);break}}}return e};TCD.utils.ArrayUtils.getItemByKey=function(f,d,b){var c,a,e;for(var c=0,a=f.length;c<a;c+=1){e=f[c];if(e.hasOwnProperty(d)){if(e[d]==b){return e}}}return undefined};TCD.utils.ArrayUtils.getItemsByKey=function(g,e,b){var d,a,f,c=[];for(var d=0,a=g.length;d<a;d+=1){f=g[d];if(f.hasOwnProperty(e)){if(f[e]==b){c.push(f)}}}return c};TCD.utils=TCD.utils||{};TCD.utils.RatioUtils=TCD.utils.RatioUtils||{widthToHeight:function(a){return a.width()/a.height()},heightToWidth:function(a){return a.height()/a.width()},scale:function(b,a,c){c=c||true;return TCD.utils.RatioUtils._defineRect(b,b.width()*a.decimalPercentage(),b.height()*a.decimalPercentage(),c)},scaleWidth:function(b,a,c){c=c||true;return TCD.utils.RatioUtils._defineRect(b,a*TCD.utils.RatioUtils.widthToHeight(b),a,c)},scaleHeight:function(a,b,c){c=c||true;return TCD.utils.RatioUtils._defineRect(a,b,b*TCD.utils.RatioUtils.heightToWidth(a),c)},scaleToFill:function(b,c,d){d=d||true;var a=TCD.utils.RatioUtils.scaleHeight(b,c.width(),d);if(a.height()<c.height()){a=TCD.utils.RatioUtils.scaleWidth(b,c.height(),d)}return a},scaleToFit:function(b,c,d){d=d||true;var a=TCD.utils.RatioUtils.scaleHeight(b,c.width(),d);if(a.height()>c.height()){a=TCD.utils.RatioUtils.scaleWidth(b,c.height(),d)}return a},_defineRect:function(c,d,a,e){var b=c.clone();b.width(e?Math.round(d):d);b.height(e?Math.round(a):a);return b}};TCD.utils=TCD.utils||{};TCD.utils.Timer=function(b,a){this.callSuper();this.delay(b);this.repeatCount(a||0);this.qualifiedClassName("TCD.utils.Timer");this._interval;this._currentCount=0};TCD.utils.Timer.superclass=TCD.events.EventDispatcher;TCD.utils.Timer.synthesizedProperties=["currentCount","delay","repeatCount","running"];TCD.utils.Timer.prototype={setRunning:function(a){throw new TCD.Error("running is read-only")},setCurrentCount:function(a){throw new TCD.Error("currentCount is read-only")},reset:function(){this.stop();this._currentCount=0},start:function(){if(this._interval){return}if(this.repeatCount()&&this.currentCount()>=this.repeatCount()){return}this._interval=setTimeout(this.tick.context(this),this.delay())},stop:function(){if(this._interval){log("clear: "+this._interval);clearTimeout(this._interval)}this._interval=undefined},tick:function(){this._currentCount+=1;if(this.repeatCount()&&this._currentCount>=this.repeatCount()){this.dispatchEvent(new TCD.utils.TimerEvent(TCD.events.TimerEvent.TIMER_COMPLETE));this.reset();return}this._interval=setTimeout(this.tick.context(this),this.delay());this.dispatchEvent(new TCD.utils.TimerEvent(TCD.events.TimerEvent.TIMER))}};TCD.Class(TCD.utils.Timer);